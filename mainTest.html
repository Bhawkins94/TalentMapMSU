<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
  
	<body>
		<!--intialize firebase-->

		<!-- The core Firebase JS SDK is always required and must be listed first -->
		<script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-app.js"></script>

		<!-- inlcude firebase database-->
		<script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-database.js"></script>

		<!-- TODO: Add SDKs for Firebase products that you want to use
			https://firebase.google.com/docs/web/setup#available-libraries -->
		<script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-analytics.js"></script>

		<script>
			// Your web app's Firebase configuration
			var firebaseConfig = {
			apiKey: "AIzaSyDy5JjYveoqLOZdhojGwuJibtIocna3d5g",
			authDomain: "testdb-37f87.firebaseapp.com",
			databaseURL: "https://testdb-37f87.firebaseio.com",
			projectId: "testdb-37f87",
			storageBucket: "testdb-37f87.appspot.com",
			messagingSenderId: "120807551652",
			appId: "1:120807551652:web:a1767dc18021d7de05ec31",
			measurementId: "G-5D0YGDHH5F"
			};

			// Initialize Firebase
			firebase.initializeApp(firebaseConfig);
			firebase.analytics();
	  
		</script>

		<script>
			var myName = prompt("Enter your name");

			function sendMessage(){
	  
				//get Message
				var message = document.getElementById("message").value;
		
				//get Timestamp, this is what gets the time you send the message
				var d = new Date();
				var time = d.toLocaleTimeString();
		
				//save in database
				firebase.database().ref("messages").push().set({
					"sender": myName,
					"message": message,
					"timestamp": time
				});
				
				//prevent form from submitting
				return false;
			}

			//listen for incoming messages
			firebase.database().ref("messages").on("child_added", function (snapshot){
			var html = "";
			html += "<li>";
			html += snapshot.val().sender + ": " + snapshot.val().message;
			html += "<li>";
			html += snapshot.val().timestamp; //in this list element, the timestamp will be added
			document.getElementById("messages").innerHTML += html;
			});

		</script>

		<form onsubmit="return sendMessage();">
			<input id="message" placeholder="Enter message" autocomplete="off">
			<input type="submit">
		</form>

		<!-- create a list of msgs-->
		<ul id="messages"></ul>
		
	</body>
</html>